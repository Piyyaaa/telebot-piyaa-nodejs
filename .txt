// Ini listener untuk semua message (apapun pesannya)
//bot.on("message", async (data) => {
//    if (data.text !== "!halo") {
//        const botProfile = await bot.getMe()
//        bot.sendMessage(data.from.id, `Halo perkenalkan saya adalah ${botProfile.
//        first_name}!\nAda yang bisa saya bantu?`)
//    }
//})

// Ini listener untuk message spesific sticker only
bot.on("sticker", (data) => {
    bot.sendMessage(data.from.id, data.sticker.emoji)
})

// Spesifik hanya ketika user ketik !halo
bot.onText(/^!halo$/, (data) => {
    bot.sendMessage(data.from.id, "Halo juga Jordy!")
})

// Ketika user ketik !follow testing, maka kata kata testing akan ditangkap
bot.onText(/^!follow(.+)/, (data, after) => {
    bot.sendMessage(data.from.id, `kata-katamu:${after[1]}`)
})

// Fetching quotes API
bot.onText(/!quote$/, async(data) => {
    // Ambil data quote dari internet
    const quoteEndpoint = "https://api.kanye.rest/"
    try {
        const apiCall = await fetch(quoteEndpoint)
        const { quote } = await apiCall.json()
        bot.sendMessage(data.from.id, quote)
    } catch (error) {
        console.error(error)
        bot.sendMessage9data.from.id, "Maaf silahkan ulangi lagi"
    }
})

bot.onText(/!news$/, async (data) => {
    const newsEndpoint = "https://jakpost.vercel.app/api/category/indonesia"
    bot.sendMessage(data.from.id, "Mohon tunggu sebentar..")
    try {
        const apiCall = await fetch(newsEndpoint)
        const response = await apiCall.json()
        const maxNews = 4

        for (let i = 0; i < maxNews; i++) {
            const news = response.posts[i]
            const {title, image, headline} = news
            bot.sendPhoto(data.from.id, image, {caption: `Judul : ${title}\n\nHeadline : ${headline}`})
        }
    } catch (error) {
        console.error(error)
    }
})